---
title: 'RFC on RFCs'
subtitle: 'Time Machine RFC-000'
author:
- Andreas Maier
- Daniel Jeller
- Frédéric Kaplan
header-includes:
- \usepackage{fancyhdr}
- \pagestyle{fancy}
- \fancyfoot[L]{-release-version-}
output: pdf_document
---

<!-- TODO: Specify release process (which platform, how will ISSN/DOI be used); Under what licenses will the RFCs be published, how are contributions licensed (will be added to this document in preliminary notes but also as License file to the repo itself); how long will the draft and candidate phases last -->

# Motivation

Reaching consensus on the technology options to follow in a programme as large as Time Machine is a complex issue. To ensure the open development and evaluation of work, a process inspired by the Request for Comments (*RFC*) that was used for the development of the Internet protocol[^wiki_rfc] will be adapted to the needs of Time Machine (*TM*). Time Machine Requests for Comments will be freely accessible publications, identified with a unique ID, constituting the main process for establishing rules, recommendations, core architectural choices for the Time Machine components. Their basic principles are:

+ *Accessibility* – TM RFC are freely accessible, free of charge.
+ *Openness* – Anybody can write a TM RFC.
+ *Identification* – Each TM RFC, once published, has a unique ID and no changes are allowed after publication. Any important changes result in a subsequent TM RFC. For this reason, some TM RFCs could be tagged as obsolete.
+ *Incrementalism* – Each TM RFC should be useful for its own right and act as a building block to others. Each TM RFC must be aimed as a contribution, extension or revision of the TM infrastructure.
+ *Standardisation and linguistic diversity* – TM RFCs should aim to make use of standardised terms to improve the clarity level of its recommendation but can be written in any language. Once published they should be translated in a maximum number of language.
+ *Scope* – TM RFCs are designed contribution and implementation solutions solving practical problems. TM RFC are not research papers and may not necessarily contain experimental evidence.
+ *Self-defining process* – Like for the development of the Internet, TM RFC could be the main process for establishing TM Rules, TM Recommendations, TM Standard Metrics but also the processes and roles for managing TM RFCs themselves.

# Proposed workflow

The TM RFC workflow is based on Git[^git_website], a tool initially designed to track changes to source code by multiple developers and GitHub[^github_about], currently the leading place to host open-source projects and to create and collaborate on software and many other kinds of projects. The collaboration and review process applied by RFCs is based on *forking*[^github_forking], a workflow, that "is most often seen in public open source projects"[^bitbucket_forking]. This ensures that contributions will be tracked indefinitely, review processes are documented correctly and it is possible to permanently access and reference obsolete versions of the RFC drafts.

Additionally, TM RFCs will give people not familiar with Git and the related tools the possibility, to participate in additional ways, for instance by publishing RFC candidates as papers on the open peer review platform OpenReview.net[^openreview_about].

The choice of this solution is motivated by the possibility of scaling the number of users and contributions in time. It is likely that RFC editions will ultimately be like maintaining a large source code base.

## Preliminary notes

+ The RFCs are managed by an RFC team appointed by the Time Machine Organisation board.
+ RFCs can be proposed by either the RFC team or any interested public contributor.
+ Any accepted RFC proposal will be assigned an identifier by the RFC Team. Identifiers are based on the pattern `RFC-[number]`. The numbers contain leading zeros to pad them to be three digits long. An example is this RFC itself, called `RFC-000`, pronounced as *RFC-zero*.
+ RFCs are drafted in Markdown[^orig_markdown_syntax] — more specifically, in the extended syntax used by Pandoc[^pandoc_markdown], a tool to convert texts between different file formats. *Note*: It is to be expected that the automatic file preview on GitHub differs from the final PDF result as Pandoc enables advanced features like footnotes that are not used by GitHub and their preferred Markdown dialect.[^gfm]
+ RFC documents are managed in Git and are hosted in a single repository on GitHub. Public contributions will be possible via issues, comments and pull requests. The RFC team is responsible for the maintenance of the repository.
+ The drafting process takes place and is therefore documented on the `master` branch of the main RFC repository[^main_repo_url].
+ Documents are prepared in directories and files named after the RFC number, for example `RFC-000/RFC-000.md`.
+ Drafts are stored in the `files/drafts` folder, release candidates in the `files/candidates` and published RFCs in the `files/releases/` folder.
+ The final result of candidates and publications will be PDF files automatically created from the Markdown documents using the above-mentioned Pandoc. These PDF files will be amended with the time of conversion as well as a unique release number and stored in the form of a GitHub Release[^github_release] with the converted documents attached as release assets.

## Phase 1: Conception

![Conception flow](images/phase_1.png)

Ideas for RFCs can come from both the RFC team and public contributors. Interested contributors with an idea for an RFC should contact the RFC team to coordinate the initial conception and drafting process. After accepting an RFC idea, the RFC team will assign an identifier and prepare the draft file from a standardised template in the official RFC repository in the `files/drafts/[RFC-id]/` folder.

Following this step, the initial draft author (either the RFC team or the public contributor with the RFC idea) can create a new fork of the official repository or pull the latest changes into their pre-existing fork in their own GitHub account and start to work on the initial version of the RFC draft document.

After the initial drafting process is finished and the draft is ready to be shared with the public, the initial draft author will create a pull request from their private fork to the official repository containing their initial version of the draft.

The RFC team will then conduct a brief internal review of the initial draft to ensure the formal correctness of the document. After this is concluded and necessary changes are made by the initial draft author in the scope of the original pull request, the pull request is merged in the master branch of the official repository and the public drafting phase will start.

## Phase 2: Public drafting

![Drafting flow](images/phase_2.png)

The drafting of an RFC is designed as a process that enables direct contributions by public participants as well as the official RFC team in the same way. Over the course of a fixed timespan all contributors can work on improvements of the draft text, discuss and review changes and vote make their opinion on the RFC draft heard. The fork-and-pull-request-workflow on GitHub makes sure that each contribution is registered and stored in the official repository indefinitely.

The official drafting phase starts with the merging of the initial RFC draft by the RFC team. The main RFC Markdown document as well as accompanying files, for example images, are stored in the `files/drafts/[RFC-id]` folder for the duration of the drafting phase.

Persons interested in contributing to the text directly, either by additions or changes of the existing content, can create a new fork (that is a full copy) of the official repository or pull the current state of its master branch into their own pre-existing fork. They can then either use the inline editor on the GitHub website to change the content of the RFC document in their own forked repository or clone their repository to their computer and use the Markdown editor / Git client of their choice to work with the files.

Changes to the RFC draft can be submitted at any time in the form of pull requests[^github_pullrequest] from the forked repository to the so-called upstream repository, that is the official RFC repository. This enables the RFC team and other contributors to review the proposed changes, suggest editions or point out problems directly next to the provided version of the draft document.

All pull requests to the official RFC repository during the drafting phase can be reviewed by any contributor but to be accepted and to be merged, favorable reviews by at least four appointed members from the official RFC team will be necessary. After a pull request passes the review, it is accepted and will be merged by the RFC team into the master branch of the RFC repository. This makes the merged version the most recent official version of the draft. Other pull requests open at the same time will automatically be compared to this new version and will have to be amended by the contributors if necessary to solve possible conflicts with the then-official version.

Another way for users not familiar with Markdown writing and the Git-based workflow to contribute are so-called GitHub Issues[^github_issues]. These are commonly used to give users the possibility to report software bugs to project developers and to track tasks to be done by project contributors. In the TM RFCs issues can be created by users that want to just report a problem with the current version of the draft or to discuss specific topics or ideas related to the RFC.

## Phase 3: Release candidate review

![Review flow](images/phase_3.png)

After the end of the drafting phase and after all open pull requests containing changes to the draft are either merged or rejected, the final version of the draft will be turned into the first release candidate by the RFC team. For this, the list of authors / contributors in the document will be updated and the folder the RFC and all accompanying documents are located in will be moved from `files/drafts` to `files/candidates`.

To trigger the automatic release of the candidate the RFC team commits and pushes the draft-turned-candidate on a new branch[^github_branches] in the main repository. The branch name will follow the pattern `[RFC-id]_candidate_[version_number]`. The version number will be assigned by the RFC team and will follow semantic versioning[^semver]. This step triggers an automatic process in GitHub that converts the Markdown document into a PDF RFC candidate document with integrated version and timestamp and publish it in the form of a GitHub release.

The PDF file created in this step will be uploaded as a submission in the RFC section of the virtual venue "TimeMachine" on the open peer review platform OpenReview.net[^openreview_timemachine]. The submission will be open for a set period of time during which users of OpenReview have the possibility to use the integrated tools to review the candidate or comment on it. This step ensures a scientifically sound RFC release and enables possible reviewers to use the tools they are familiar with from other paper review processes.

During this time contributors are encouraged to participate on OpenReview. Discussions in GitHub issues are still possible but pull requests on release candidates will not be accepted.

Depending on the result of the release candidate review process, the RFC will either progress to the official release phase or return to another drafting and refinement phase. If an additional drafting phase is necessary, the document will be moved back to `files/drafts` by the RFC team and pull requests on the `master` branch will again be considered for merging.

## Phase 4: Official release

![Release flow](images/phase_4.png)

If an RFC candidate is accepted by the community during the review phase on OpenReview, it will be prepared for the official release by the RFC team. Again, the list of contributors will be updated as necessary and the document folder will be moved to `files/releases`. This change will be pushed onto a new Git branch that follows the naming pattern `[RFC-id]_release_[version_number]`. Analogous to the candidate phase, the version number will be assigned by the RFC team and will follow semantic versioning. This step will again trigger the conversion of the document in the form of a versioned and timestamped PDF document that will be published as an asset on a GitHub release.

The finalized release PDF will then be published as an official publication by the Time Machine.

<!-- Footnote content. Only alphanumeric characters and underscores are allowed. Please keep alphabetical sorting -->

[^bitbucket_forking]: <https://www.atlassian.com/git/tutorials/comparing-workflows/forking-workflow>
[^gfm]: GitHub Flavored Markdown (*GFM*) <https://github.github.com/gfm/>
[^git_website]: <https://git-scm.com/>
[^github_about]: <https://github.com/about>
[^github_branches]: <https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-branches>
[^github_forking]: <https://guides.github.com/activities/forking/>
[^github_issues]: <https://guides.github.com/features/issues/>
[^github_pullrequest]: <https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests>
[^github_release]: <https://help.github.com/en/github/administering-a-repository/about-releases>
[^main_repo_url]: <https://github.com/time-machine-project/requests-for-comments>
[^openreview_about]: <https://openreview.net/about>
[^openreview_timemachine]: <https://openreview.net/group?id=TimeMachine.eu/RFC>
[^orig_markdown_syntax]: <https://daringfireball.net/projects/Markdown/syntax>
[^pandoc_markdown]: <https://pandoc.org/MANUAL.html#pandocs-Markdown>
[^semver]: <https://semver.org/>
[^wiki_rfc]: <https://en.wikipedia.org/wiki/Request_for_Comments>
